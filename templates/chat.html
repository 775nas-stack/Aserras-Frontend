{% extends "base.html" %}
{% block content %}
<section class="chat-page">
  <div class="container chat-container">
    <header class="chat-hero" data-content-block="chat-hero">
      <div class="chat-identity">
        <span class="chat-logo" aria-hidden="true">A</span>
        <div>
          <p class="chat-greeting">Hello, {{ user_name or 'Creator' }}.</p>
          <h1 data-content-key="chat-title">Your private conversation space.</h1>
          <p data-content-key="chat-description">
            Capture ideas, brief your team, and keep every response within reach in a focused, secure timeline.
          </p>
        </div>
      </div>
      {% if warning %}
        <p class="banner banner--warning">{{ warning }}</p>
      {% endif %}
    </header>

    <div class="chat-panel">
      <div
        class="chat-transcript"
        id="chat-transcript"
        role="log"
        aria-live="polite"
        aria-busy="false"
        aria-label="Conversation"
        data-empty="true"
      >
        <p class="chat-empty" data-chat-empty>Ask anything to begin.</p>
      </div>
      <p class="chat-status" data-chat-status data-state="idle" role="status" aria-live="polite" data-content-key="chat-status">
        Messages you send are saved instantly and remain available across your workspace.
      </p>
      <form id="chat-form" class="chat-composer" autocomplete="off" novalidate>
        {% if models %}
          <label class="sr-only" for="chat-model">Model</label>
          <select id="chat-model" class="chat-model" data-chat-model>
            <option value="">Default model</option>
            {% for model in models %}
              <option value="{{ model.id or model.slug or model.name }}">{{ model.name or model.label }}</option>
            {% endfor %}
          </select>
        {% endif %}
        <label class="sr-only" for="chat-input">Message</label>
        <textarea
          id="chat-input"
          name="message"
          rows="1"
          placeholder="Type your message..."
          data-chat-input
          spellcheck="true"
          required
        ></textarea>
        <button class="btn primary chat-send" type="submit" data-chat-send disabled>
          Send
        </button>
      </form>
    </div>
  </div>
</section>
{% endblock %}
{% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", () => {
    window.aserrasUI?.initChat?.();
  });
</script>
{% endblock %}
